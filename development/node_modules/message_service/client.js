var net = require('net');

var createClient = function(config) {
    return new Client(config);
}

var Client = function(config) {
    var self = this;
    var client =  net.createConnection(config, function() {
        console.log('client connected');
    });
    this.client = client;

    client.on('data', function(data) {
        console.log(data.toString());
        client.end();
    });

    client.on('end', function() {
        console.log('client disconnected');
    });

    client.on('error', function(err) {
        console.error(err);
    });

    this.sendMessage = function(message) {
        client.write(message.toMessage());
    }
}

module.exports = {
    createClient: createClient
};
